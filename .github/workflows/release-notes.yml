name: Generate & Commit Detailed Release Notes

on:
  workflow_dispatch:
    inputs:
      version:
        description: "Release version (e.g., v1.0.0)"
        required: true
      environment:
        description: "Target environment (e.g., Production)"
        required: true
        default: "Production"
      overview:
        description: "Short overview of the release"
        required: true
      start_date:
        description: "Start date for PR collection (YYYY-MM-DD)"
        required: true
      end_date:
        description: "End date for PR collection (YYYY-MM-DD, optional, default = today)"
        required: false

jobs:
  generate-and-commit:
    runs-on: ubuntu-latest

    steps: # âœ… This is important!
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Get Current Date
        id: date
        run: echo "date=$(date +'%Y-%m-%d')" >> $GITHUB_OUTPUT

      - name: Set End Date
        id: enddate
        run: |
          if [ -z "${{ github.event.inputs.end_date }}" ]; then
            echo "end_date=${{ steps.date.outputs.date }}" >> $GITHUB_OUTPUT
          else
            echo "end_date=${{ github.event.inputs.end_date }}" >> $GITHUB_OUTPUT
          fi

      - name: Generate Detailed Release Notes
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          # ðŸ§¾ Your full shell script here
          # VERSION=...
          # echo "## release notes" >> file
          # etc...
